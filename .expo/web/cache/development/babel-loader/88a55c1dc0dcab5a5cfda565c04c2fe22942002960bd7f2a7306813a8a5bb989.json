{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { FirebaseApp, initializeApp } from \"firebase/app\";\nimport { getDatabase, onValue, ref as sRef, set, remove } from \"firebase/database\";\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { useNavigation } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar firebaseConfig = {\n  apiKey: \"AIzaSyBZoCJQgmwqXltZbBWmkZ54stBlT6jf4Gs\",\n  authDomain: \"restoapp-2e79a.firebaseapp.com\",\n  databaseURL: \"https://restoapp-2e79a-default-rtdb.firebaseio.com\",\n  projectId: \"restoapp-2e79a\",\n  storageBucket: \"restoapp-2e79a.appspot.com\",\n  messagingSenderId: \"300896535259\",\n  appId: \"1:300896535259:web:33f41bd2627b410064c2fe\",\n  measurementId: \"G-X9RC5LH6MK\"\n};\nvar app = initializeApp(firebaseConfig);\nvar database = getDatabase(app);\nvar Stack = createNativeStackNavigator();\nfunction CajaScreen() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    MesasCerradas = _useState2[0],\n    setMesasCerradas = _useState2[1];\n  var mesasRef = sRef(database, \"Mesascerradas\");\n  useEffect(function () {\n    var unsubscribe = onValue(mesasRef, function (snapshot) {\n      if (snapshot.exists()) {\n        var data = snapshot.val();\n        var mesasCerradasArray = Object.values(data);\n        setMesasCerradas(mesasCerradasArray);\n      } else {\n        setMesasCerradas([]);\n      }\n    });\n    return function () {\n      unsubscribe();\n    };\n  }, []);\n  var agruparElementosPorNombre = function agruparElementosPorNombre(elementos) {\n    var agrupados = {};\n    elementos.forEach(function (elemento) {\n      var key = `${elemento.nombre}-${elemento.variante || ''}`;\n      if (agrupados[key]) {\n        agrupados[key].cantidad++;\n      } else {\n        agrupados[key] = _objectSpread(_objectSpread({}, elemento), {}, {\n          cantidad: 1\n        });\n      }\n    });\n    return Object.values(agrupados);\n  };\n  return _jsxs(View, {\n    children: [_jsx(Text, {\n      children: \"Mesas Cerradas\"\n    }), _jsx(FlatList, {\n      data: MesasCerradas,\n      keyExtractor: function keyExtractor(item) {\n        return Object.keys(item)[0];\n      },\n      renderItem: function renderItem(_ref) {\n        var item = _ref.item;\n        var mesaData = Object.values(item)[0];\n        var elementosAgrupados = agruparElementosPorNombre(mesaData.carrito);\n        return _jsxs(View, {\n          style: {\n            padding: 10,\n            borderColor: 'black',\n            borderWidth: 1,\n            margin: 10,\n            alignItems: \"center\"\n          },\n          children: [_jsxs(Text, {\n            children: [\"Mozo:\", mesaData.mozo]\n          }), _jsx(Text, {\n            children: mesaData.mozo\n          }), _jsxs(Text, {\n            children: [\"Mesa: \", mesaData.mesa]\n          }), _jsxs(Text, {\n            children: [\"M\", mesaData.mesa]\n          }), _jsx(Text, {\n            children: \"Pedido:\"\n          }), agruparElementosPorNombre(mesaData.carrito).map(function (elemento, index) {\n            return _jsx(View, {\n              children: _jsxs(Text, {\n                children: [elemento.nombre, elemento.variante ? _jsxs(Text, {\n                  children: [elemento.variante, \",\"]\n                }, index) : null, \" X\", elemento.cantidad]\n              }, index)\n            }, index);\n          })]\n        });\n      }\n    })]\n  });\n}\nexport default CajaScreen;","map":{"version":3,"names":["React","useState","useEffect","View","Text","Button","FlatList","TouchableOpacity","FirebaseApp","initializeApp","getDatabase","onValue","ref","sRef","set","remove","createNativeStackNavigator","useNavigation","jsx","_jsx","jsxs","_jsxs","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","app","database","Stack","CajaScreen","_useState","_useState2","_slicedToArray","MesasCerradas","setMesasCerradas","mesasRef","unsubscribe","snapshot","exists","data","val","mesasCerradasArray","Object","values","agruparElementosPorNombre","elementos","agrupados","forEach","elemento","key","nombre","variante","cantidad","_objectSpread","children","keyExtractor","item","keys","renderItem","_ref","mesaData","elementosAgrupados","carrito","style","padding","borderColor","borderWidth","margin","alignItems","mozo","mesa","map","index"],"sources":["C:/Users/octal/OneDrive/Documentos/Diseño web/proyectos/calm-apples/calm-apples/Components/Caja.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, Button, FlatList, TouchableOpacity } from 'react-native';\r\nimport { FirebaseApp, initializeApp } from \"firebase/app\";\r\nimport { getDatabase, onValue, ref as sRef, set, remove } from \"firebase/database\";\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyBZoCJQgmwqXltZbBWmkZ54stBlT6jf4Gs\",\r\n    authDomain: \"restoapp-2e79a.firebaseapp.com\",\r\n    databaseURL: \"https://restoapp-2e79a-default-rtdb.firebaseio.com\",\r\n    projectId: \"restoapp-2e79a\",\r\n    storageBucket: \"restoapp-2e79a.appspot.com\",\r\n    messagingSenderId: \"300896535259\",\r\n    appId: \"1:300896535259:web:33f41bd2627b410064c2fe\",\r\n    measurementId: \"G-X9RC5LH6MK\"\r\n};\r\n\r\nconst app: FirebaseApp = initializeApp(firebaseConfig);\r\n\r\nconst database = getDatabase(app);\r\n\r\nconst Stack = createNativeStackNavigator();\r\n\r\nfunction CajaScreen() {\r\n    const [MesasCerradas, setMesasCerradas] = useState([]);\r\n    const mesasRef = sRef(database, \"Mesascerradas\");\r\n  \r\n    useEffect(() => {\r\n      // Escuchar cambios en la ubicación de mesas cerradas\r\n      const unsubscribe = onValue(mesasRef, (snapshot) => {\r\n        if (snapshot.exists()) {\r\n          const data = snapshot.val();\r\n          const mesasCerradasArray = Object.values(data);\r\n          setMesasCerradas(mesasCerradasArray);\r\n        } else {\r\n          setMesasCerradas([]);\r\n        }\r\n      });\r\n  \r\n      return () => {\r\n        // Detener la escucha cuando se desmonte el componente\r\n        unsubscribe();\r\n      };\r\n    }, []);\r\n  \r\n    const agruparElementosPorNombre = (elementos) => {\r\n      const agrupados = {};\r\n  \r\n      elementos.forEach((elemento) => {\r\n        const key = `${elemento.nombre}-${elemento.variante || ''}`;\r\n        if (agrupados[key]) {\r\n          agrupados[key].cantidad++;\r\n        } else {\r\n          agrupados[key] = { ...elemento, cantidad: 1 };\r\n        }\r\n      });\r\n  \r\n      return Object.values(agrupados);\r\n    };\r\n  \r\n    return (\r\n      <View>\r\n        <Text>Mesas Cerradas</Text>\r\n        <FlatList\r\n          data={MesasCerradas}\r\n          keyExtractor={(item) => Object.keys(item)[0]}\r\n          renderItem={({ item }) => {\r\n            const mesaData = Object.values(item)[0];\r\n            const elementosAgrupados = agruparElementosPorNombre(mesaData.carrito);\r\n  \r\n            return (\r\n              <View style={{ padding: 10, borderColor: 'black', borderWidth: 1, margin: 10, alignItems: \"center\" }}>\r\n                <Text>Mozo:{mesaData.mozo}</Text>\r\n                <Text>{mesaData.mozo}</Text>\r\n                <Text>Mesa: {mesaData.mesa}</Text>\r\n                <Text>M{mesaData.mesa}</Text>\r\n                <Text>Pedido:</Text>\r\n                {agruparElementosPorNombre(mesaData.carrito).map((elemento, index) => (\r\n                <View key={index}>\r\n                <Text key={index}>\r\n                    {elemento.nombre}{elemento.variante ? (\r\n                    <Text key={index}>{elemento.variante},</Text>\r\n                ) : null} X{elemento.cantidad}\r\n                </Text>\r\n              </View>\r\n            ))}\r\n              </View>\r\n            );\r\n          }}\r\n        />\r\n      </View>\r\n    );\r\n  } \r\n\r\nexport default CajaScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}